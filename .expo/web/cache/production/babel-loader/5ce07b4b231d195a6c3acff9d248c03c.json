{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import _regeneratorRuntime from\"@babel/runtime/regenerator\";import Head from'next/head';import{serverSideTranslations}from'next-i18next/serverSideTranslations';import{useTranslation}from'next-i18next';import Header from'./components/Header';import Footer from'./components/Footer';import AvatarEditor from'./components/AvatarEditor';import{useCallback,useEffect,useState}from\"react\";import{INFURA_ID,NETWORKS}from\"./common/constants\";import{useUserProviderAndSigner}from\"eth-hooks\";import Web3Modal from\"web3modal\";import WalletConnectProvider from\"@walletconnect/web3-provider\";import Portis from\"@portis/web3\";import Fortmatic from\"fortmatic\";var _require=require(\"ethers\"),ethers=_require.ethers;var scaffoldEthProvider=navigator.onLine?new ethers.providers.StaticJsonRpcProvider(\"https://rpc.scaffoldeth.io:48544\"):null;var poktMainnetProvider=navigator.onLine?new ethers.providers.StaticJsonRpcProvider(\"https://eth-mainnet.gateway.pokt.network/v1/lb/611156b4a585a20035148406\"):null;var mainnetInfura=navigator.onLine?new ethers.providers.StaticJsonRpcProvider(\"https://mainnet.infura.io/v3/\"+INFURA_ID):null;var mainnetProvider=poktMainnetProvider&&poktMainnetProvider._isProvider?poktMainnetProvider:scaffoldEthProvider&&scaffoldEthProvider._network?scaffoldEthProvider:mainnetInfura;var targetNetwork=NETWORKS.mumbai;var DEBUG=true;var NETWORKCHECK=true;var web3Modal=new Web3Modal({network:\"mainnet\",cacheProvider:true,theme:\"light\",providerOptions:{walletconnect:{package:WalletConnectProvider,options:{bridge:\"https://polygon.bridge.walletconnect.org\",infuraId:INFURA_ID,rpc:{1:\"https://mainnet.infura.io/v3/\"+INFURA_ID,42:\"https://kovan.infura.io/v3/\"+INFURA_ID,100:\"https://dai.poa.network\"}}},portis:{display:{logo:\"https://user-images.githubusercontent.com/9419140/128913641-d025bc0c-e059-42de-a57b-422f196867ce.png\",name:\"Portis\",description:\"Connect to Portis App\"},package:Portis,options:{id:\"6255fb2b-58c8-433b-a2c9-62098c05ddc9\"}},fortmatic:{package:Fortmatic,options:{key:\"pk_live_5A7C91B2FC585A17\"}}}});var Home=function Home(){var _useTranslation=useTranslation(\"common\"),t=_useTranslation.t;var _useState=useState(),_useState2=_slicedToArray(_useState,2),address=_useState2[0],setAddress=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),injectedProvider=_useState4[0],setInjectedProvider=_useState4[1];var localProviderUrl=targetNetwork.rpcUrl;var localProviderUrlFromEnv=process.env.REACT_APP_PROVIDER?process.env.REACT_APP_PROVIDER:localProviderUrl;if(DEBUG)console.log(\"🏠 Connecting to provider:\",localProviderUrlFromEnv);var localProvider=new ethers.providers.StaticJsonRpcProvider(localProviderUrlFromEnv);var userProviderAndSigner=useUserProviderAndSigner(injectedProvider,localProvider);var userSigner=userProviderAndSigner.signer;useEffect(function(){function getAddress(){var newAddress;return _regeneratorRuntime.async(function getAddress$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"getAddress\");if(!userSigner){_context.next=7;break;}_context.next=4;return _regeneratorRuntime.awrap(userSigner.getAddress());case 4:newAddress=_context.sent;console.log(newAddress);setAddress(newAddress);case 7:case\"end\":return _context.stop();}}},null,null,null,Promise);}getAddress();},[userSigner]);var logoutOfWeb3Modal=function logoutOfWeb3Modal(){return _regeneratorRuntime.async(function logoutOfWeb3Modal$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(web3Modal.clearCachedProvider());case 2:if(!(injectedProvider&&injectedProvider.provider&&typeof injectedProvider.provider.disconnect==\"function\")){_context2.next=5;break;}_context2.next=5;return _regeneratorRuntime.awrap(injectedProvider.provider.disconnect());case 5:setTimeout(function(){window.location.reload();},1);case 6:case\"end\":return _context2.stop();}}},null,null,null,Promise);};var loadWeb3Modal=useCallback(function _callee(){var provider;return _regeneratorRuntime.async(function _callee$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _regeneratorRuntime.awrap(web3Modal.connect());case 2:provider=_context3.sent;setInjectedProvider(new ethers.providers.Web3Provider(provider));provider.on(\"chainChanged\",function(chainId){console.log(\"chain changed to \"+chainId+\"! updating providers\");setInjectedProvider(new ethers.providers.Web3Provider(provider));});provider.on(\"accountsChanged\",function(){console.log(\"account changed!\");setInjectedProvider(new ethers.providers.Web3Provider(provider));});provider.on(\"disconnect\",function(code,reason){console.log(code,reason);logoutOfWeb3Modal();});case 7:case\"end\":return _context3.stop();}}},null,null,null,Promise);},[setInjectedProvider]);useEffect(function(){if(web3Modal.cachedProvider){loadWeb3Modal();}},[loadWeb3Modal]);return React.createElement(React.Fragment,null,React.createElement(Head,null,React.createElement(\"link\",{rel:\"apple-touch-icon\",sizes:\"57x57\",href:\"/favicon/apple-icon-57x57.png\"}),React.createElement(\"link\",{rel:\"apple-touch-icon\",sizes:\"60x60\",href:\"/favicon/apple-icon-60x60.png\"}),React.createElement(\"link\",{rel:\"apple-touch-icon\",sizes:\"72x72\",href:\"/favicon/apple-icon-72x72.png\"}),React.createElement(\"link\",{rel:\"apple-touch-icon\",sizes:\"76x76\",href:\"/favicon/apple-icon-76x76.png\"}),React.createElement(\"link\",{rel:\"apple-touch-icon\",sizes:\"114x114\",href:\"/favicon/apple-icon-114x114.png\"}),React.createElement(\"link\",{rel:\"apple-touch-icon\",sizes:\"120x120\",href:\"/favicon/apple-icon-120x120.png\"}),React.createElement(\"link\",{rel:\"apple-touch-icon\",sizes:\"144x144\",href:\"/favicon/apple-icon-144x144.png\"}),React.createElement(\"link\",{rel:\"apple-touch-icon\",sizes:\"152x152\",href:\"/favicon/apple-icon-152x152.png\"}),React.createElement(\"link\",{rel:\"apple-touch-icon\",sizes:\"180x180\",href:\"/favicon/apple-icon-180x180.png\"}),React.createElement(\"link\",{rel:\"icon\",type:\"image/png\",sizes:\"192x192\",href:\"/favicon/android-icon-192x192.png\"}),React.createElement(\"link\",{rel:\"icon\",type:\"image/png\",sizes:\"32x32\",href:\"/favicon/favicon-32x32.png\"}),React.createElement(\"link\",{rel:\"icon\",type:\"image/png\",sizes:\"96x96\",href:\"/favicon/favicon-96x96.png\"}),React.createElement(\"link\",{rel:\"icon\",type:\"image/png\",sizes:\"16x16\",href:\"/favicon/favicon-16x16.png\"}),React.createElement(\"link\",{rel:\"manifest\",href:\"/manifest.json\"}),React.createElement(\"title\",null,t(\"siteTitle\")),React.createElement(\"meta\",{name:\"description\",content:t(\"siteDescription\")}),React.createElement(\"meta\",{name:\"msapplication-TileColor\",content:\"#fffefc\"}),React.createElement(\"meta\",{name:\"msapplication-TileImage\",content:\"/favicon/ms-icon-144x144.png\"}),React.createElement(\"meta\",{name:\"theme-color\",content:\"#fffefc\"}),React.createElement(\"meta\",{content:t(\"siteDescription\"),name:\"description\"}),React.createElement(\"meta\",{property:\"og:type\",content:\"website\"}),React.createElement(\"meta\",{property:\"og:site_name\",content:t(\"siteTitle\")}),React.createElement(\"meta\",{property:\"og:title\",content:t(\"siteTitle\")}),React.createElement(\"meta\",{property:\"og:description\",content:t(\"siteDescription\")}),React.createElement(\"meta\",{property:\"og:image\",content:\"https://i.imgur.com/F5R0K03.png\"}),React.createElement(\"meta\",{name:\"twitter:card\",content:\"summary_large_image\"}),React.createElement(\"meta\",{name:\"twitter:image\",content:\"https://i.imgur.com/F5R0K03.png\"}),React.createElement(\"meta\",{name:\"twitter:site\",content:\"@phillzou\"}),React.createElement(\"meta\",{name:\"twitter:title\",content:t(\"siteTitle\")}),React.createElement(\"meta\",{name:\"twitter:description\",content:t(\"siteDescription\")})),React.createElement(Header,{address:address,localProvider:localProvider,userSigner:userSigner,mainnetProvider:mainnetProvider,price:\"\",web3Modal:web3Modal,loadWeb3Modal:loadWeb3Modal,logoutOfWeb3Modal:logoutOfWeb3Modal,blockExplorer:\"blockExplorer\"}),React.createElement(\"main\",{className:\"my-5\"},React.createElement(AvatarEditor,null)),React.createElement(Footer,null));};export function getStaticProps(_ref){var locale;return _regeneratorRuntime.async(function getStaticProps$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:locale=_ref.locale;_context4.t0=_objectSpread;_context4.t1={};_context4.next=5;return _regeneratorRuntime.awrap(serverSideTranslations(locale,[\"common\"]));case 5:_context4.t2=_context4.sent;_context4.t3=(0,_context4.t0)(_context4.t1,_context4.t2);return _context4.abrupt(\"return\",{props:_context4.t3});case 8:case\"end\":return _context4.stop();}}},null,null,null,Promise);}export default Home;","map":{"version":3,"sources":["E:/scaffold-eth/packages/avatar-metaverse/src/pages/index.tsx"],"names":["Head","serverSideTranslations","useTranslation","Header","Footer","AvatarEditor","useCallback","useEffect","useState","INFURA_ID","NETWORKS","useUserProviderAndSigner","Web3Modal","WalletConnectProvider","Portis","Fortmatic","require","ethers","scaffoldEthProvider","navigator","onLine","providers","StaticJsonRpcProvider","poktMainnetProvider","mainnetInfura","mainnetProvider","_isProvider","_network","targetNetwork","mumbai","DEBUG","NETWORKCHECK","web3Modal","network","cacheProvider","theme","providerOptions","walletconnect","package","options","bridge","infuraId","rpc","portis","display","logo","name","description","id","fortmatic","key","Home","t","address","setAddress","injectedProvider","setInjectedProvider","localProviderUrl","rpcUrl","localProviderUrlFromEnv","process","env","REACT_APP_PROVIDER","console","log","localProvider","userProviderAndSigner","userSigner","signer","getAddress","newAddress","logoutOfWeb3Modal","clearCachedProvider","provider","disconnect","setTimeout","window","location","reload","loadWeb3Modal","connect","Web3Provider","on","chainId","code","reason","cachedProvider","getStaticProps","locale","props"],"mappings":"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","sourcesContent":["import type {GetStaticPropsContext, NextPage} from 'next';\nimport Head from 'next/head';\nimport {serverSideTranslations} from 'next-i18next/serverSideTranslations';\nimport {useTranslation} from 'next-i18next';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport AvatarEditor from './components/AvatarEditor';\nimport {useCallback, useEffect, useState} from \"react\";\nimport {INFURA_ID, NETWORK, NETWORKS} from \"./common/constants\";\nimport {useUserProviderAndSigner} from \"eth-hooks\";\nimport Web3Modal from \"web3modal\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport Portis from \"@portis/web3\";\nimport Fortmatic from \"fortmatic\";\n\nconst {ethers} = require(\"ethers\");\n\nconst scaffoldEthProvider = navigator.onLine\n  ? new ethers.providers.StaticJsonRpcProvider(\"https://rpc.scaffoldeth.io:48544\")\n  : null;\nconst poktMainnetProvider = navigator.onLine\n  ? new ethers.providers.StaticJsonRpcProvider(\n    \"https://eth-mainnet.gateway.pokt.network/v1/lb/611156b4a585a20035148406\",\n  )\n  : null;\nconst mainnetInfura = navigator.onLine\n  ? new ethers.providers.StaticJsonRpcProvider(\"https://mainnet.infura.io/v3/\" + INFURA_ID)\n  : null;\n\nconst mainnetProvider =\n  poktMainnetProvider && poktMainnetProvider._isProvider\n    ? poktMainnetProvider\n    : scaffoldEthProvider && scaffoldEthProvider._network\n    ? scaffoldEthProvider\n    : mainnetInfura;\nconst targetNetwork = NETWORKS.mumbai; // <------- select your target frontend network (localhost, rinkeby, xdai, mainnet)\n// 😬 Sorry for all the console logging\nconst DEBUG = true;\nconst NETWORKCHECK = true;\n\nconst web3Modal = new Web3Modal({\n  network: \"mainnet\", // Optional. If using WalletConnect on xDai, change network to \"xdai\" and add RPC info below for xDai chain.\n  cacheProvider: true, // optional\n  theme: \"light\", // optional. Change to \"dark\" for a dark theme.\n  providerOptions: {\n    walletconnect: {\n      package: WalletConnectProvider, // required\n      options: {\n        bridge: \"https://polygon.bridge.walletconnect.org\",\n        infuraId: INFURA_ID,\n        rpc: {\n          1: `https://mainnet.infura.io/v3/${INFURA_ID}`, // mainnet // For more WalletConnect providers: https://docs.walletconnect.org/quick-start/dapps/web3-provider#required\n          42: `https://kovan.infura.io/v3/${INFURA_ID}`,\n          100: \"https://dai.poa.network\", // xDai\n        },\n      },\n    },\n    portis: {\n      display: {\n        logo: \"https://user-images.githubusercontent.com/9419140/128913641-d025bc0c-e059-42de-a57b-422f196867ce.png\",\n        name: \"Portis\",\n        description: \"Connect to Portis App\",\n      },\n      package: Portis,\n      options: {\n        id: \"6255fb2b-58c8-433b-a2c9-62098c05ddc9\",\n      },\n    },\n    fortmatic: {\n      package: Fortmatic, // required\n      options: {\n        key: \"pk_live_5A7C91B2FC585A17\", // required\n      },\n    },\n    // \"custom-walletlink\": {\n    //   display: {\n    //     logo: \"https://play-lh.googleusercontent.com/PjoJoG27miSglVBXoXrxBSLveV6e3EeBPpNY55aiUUBM9Q1RCETKCOqdOkX2ZydqVf0\",\n    //     name: \"Coinbase\",\n    //     description: \"Connect to Coinbase Wallet (not Coinbase App)\",\n    //   },\n    //   package: walletLinkProvider,\n    //   connector: async (provider, _options) => {\n    //     await provider.enable();\n    //     return provider;\n    //   },\n    // },\n    // authereum: {\n    //   package: Authereum, // required\n    // },\n  },\n});\n\n\nconst Home: NextPage = () => {\n  const {t} = useTranslation(`common`);\n\n  const [address, setAddress] = useState();\n  const [injectedProvider, setInjectedProvider] = useState();\n\n\n  const localProviderUrl = targetNetwork.rpcUrl;\n  // as you deploy to other networks you can set REACT_APP_PROVIDER=https://dai.poa.network in packages/react-app/.env\n  const localProviderUrlFromEnv = process.env.REACT_APP_PROVIDER ? process.env.REACT_APP_PROVIDER : localProviderUrl;\n  if (DEBUG) console.log(\"🏠 Connecting to provider:\", localProviderUrlFromEnv);\n  const localProvider = new ethers.providers.StaticJsonRpcProvider(localProviderUrlFromEnv);\n\n  const userProviderAndSigner = useUserProviderAndSigner(injectedProvider, localProvider);\n  // @ts-ignore\n  const userSigner = userProviderAndSigner.signer;\n\n  useEffect(() => {\n    async function getAddress() {\n      console.log(\"getAddress\")\n      if (userSigner) {\n        const newAddress = await userSigner.getAddress();\n        console.log(newAddress)\n        // @ts-ignore\n        setAddress(newAddress);\n      }\n    }\n\n    getAddress();\n  }, [userSigner]);\n\n\n  const logoutOfWeb3Modal = async () => {\n    await web3Modal.clearCachedProvider();\n    // @ts-ignore\n    if (injectedProvider && injectedProvider.provider && typeof injectedProvider.provider.disconnect == \"function\") {\n      // @ts-ignore\n      await injectedProvider.provider.disconnect();\n    }\n    setTimeout(() => {\n      window.location.reload();\n    }, 1);\n  };\n\n  const loadWeb3Modal = useCallback(async () => {\n    const provider = await web3Modal.connect();\n    setInjectedProvider(new ethers.providers.Web3Provider(provider));\n\n    // @ts-ignore\n    provider.on(\"chainChanged\", chainId => {\n      console.log(`chain changed to ${chainId}! updating providers`);\n      setInjectedProvider(new ethers.providers.Web3Provider(provider));\n    });\n\n    provider.on(\"accountsChanged\", () => {\n      console.log(`account changed!`);\n      setInjectedProvider(new ethers.providers.Web3Provider(provider));\n    });\n\n    // Subscribe to session disconnection\n    // @ts-ignore\n    provider.on(\"disconnect\", (code, reason) => {\n      console.log(code, reason);\n      logoutOfWeb3Modal();\n    });\n  }, [setInjectedProvider]);\n\n  useEffect(() => {\n    if (web3Modal.cachedProvider) {\n      loadWeb3Modal();\n    }\n  }, [loadWeb3Modal]);\n\n  return (\n    <>\n      <Head>\n        <link\n          rel=\"apple-touch-icon\"\n          sizes=\"57x57\"\n          href=\"/favicon/apple-icon-57x57.png\"\n        />\n        <link\n          rel=\"apple-touch-icon\"\n          sizes=\"60x60\"\n          href=\"/favicon/apple-icon-60x60.png\"\n        />\n        <link\n          rel=\"apple-touch-icon\"\n          sizes=\"72x72\"\n          href=\"/favicon/apple-icon-72x72.png\"\n        />\n        <link\n          rel=\"apple-touch-icon\"\n          sizes=\"76x76\"\n          href=\"/favicon/apple-icon-76x76.png\"\n        />\n        <link\n          rel=\"apple-touch-icon\"\n          sizes=\"114x114\"\n          href=\"/favicon/apple-icon-114x114.png\"\n        />\n        <link\n          rel=\"apple-touch-icon\"\n          sizes=\"120x120\"\n          href=\"/favicon/apple-icon-120x120.png\"\n        />\n        <link\n          rel=\"apple-touch-icon\"\n          sizes=\"144x144\"\n          href=\"/favicon/apple-icon-144x144.png\"\n        />\n        <link\n          rel=\"apple-touch-icon\"\n          sizes=\"152x152\"\n          href=\"/favicon/apple-icon-152x152.png\"\n        />\n        <link\n          rel=\"apple-touch-icon\"\n          sizes=\"180x180\"\n          href=\"/favicon/apple-icon-180x180.png\"\n        />\n        <link\n          rel=\"icon\"\n          type=\"image/png\"\n          sizes=\"192x192\"\n          href=\"/favicon/android-icon-192x192.png\"\n        />\n        <link\n          rel=\"icon\"\n          type=\"image/png\"\n          sizes=\"32x32\"\n          href=\"/favicon/favicon-32x32.png\"\n        />\n        <link\n          rel=\"icon\"\n          type=\"image/png\"\n          sizes=\"96x96\"\n          href=\"/favicon/favicon-96x96.png\"\n        />\n        <link\n          rel=\"icon\"\n          type=\"image/png\"\n          sizes=\"16x16\"\n          href=\"/favicon/favicon-16x16.png\"\n        />\n        <link rel=\"manifest\" href=\"/manifest.json\"/>\n        <title>{t(`siteTitle`)}</title>\n        <meta name=\"description\" content={t(`siteDescription`)}/>\n        <meta name=\"msapplication-TileColor\" content=\"#fffefc\"/>\n        <meta\n          name=\"msapplication-TileImage\"\n          content=\"/favicon/ms-icon-144x144.png\"\n        />\n        <meta name=\"theme-color\" content=\"#fffefc\"/>\n        <meta content={t(`siteDescription`)} name=\"description\"/>\n        <meta property=\"og:type\" content=\"website\"/>\n        <meta property=\"og:site_name\" content={t(`siteTitle`)}/>\n        <meta property=\"og:title\" content={t(`siteTitle`)}/>\n        <meta property=\"og:description\" content={t(`siteDescription`)}/>\n        <meta property=\"og:image\" content=\"https://i.imgur.com/F5R0K03.png\"/>\n        <meta name=\"twitter:card\" content=\"summary_large_image\"/>\n        <meta name=\"twitter:image\" content=\"https://i.imgur.com/F5R0K03.png\"/>\n        <meta name=\"twitter:site\" content=\"@phillzou\"/>\n        <meta name=\"twitter:title\" content={t(`siteTitle`)}/>\n        <meta name=\"twitter:description\" content={t(`siteDescription`)}/>\n      </Head>\n\n      <Header\n        address={address}\n        localProvider={localProvider}\n        userSigner={userSigner}\n        mainnetProvider={mainnetProvider}\n        price={\"\"}\n        web3Modal={web3Modal}\n        loadWeb3Modal={loadWeb3Modal}\n        logoutOfWeb3Modal={logoutOfWeb3Modal}\n        blockExplorer={\"blockExplorer\"}\n      />\n      <main className=\"my-5\">\n        <AvatarEditor/>\n      </main>\n      <Footer/>\n    </>\n  );\n};\n\nexport async function getStaticProps({\n                                       locale,\n                                     }: GetStaticPropsContext & { locale: string }) {\n  return {\n    props: {\n      ...(await serverSideTranslations(locale, [`common`])),\n    },\n  };\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}